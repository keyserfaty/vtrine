!function e(t,r,a){function o(s,i){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!i&&u)return u(s,!0);if(n)return n(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var c=r[s]={exports:{}};t[s][0].call(c.exports,function(e){var r=t[s][1][e];return o(r||e)},c,c.exports,e,t,r,a)}return r[s].exports}for(var n="function"==typeof require&&require,s=0;s<a.length;s++)o(a[s]);return o}({1:[function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.d=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},s=e("./helpers/store"),i=e("./helpers"),u=e("./constants"),d=e("./components/Downloads"),c=a(d),l=e("./components/SearchBoxMain"),p=a(l),_=e("./components/SearchBoxHeader"),f=a(_),N=e("./components/OnBoarding"),g=a(N),y=e("./components/SaveIcon"),h=a(y),v=e("./components/Full"),m=a(v),O=r.d=document,E={routes:{path:"/"},searchValue:"",displayDownloads:!1,isNavigating:!1,imagesQueue:[],currentImage:null,currentImageId:0,nextImage:null,imagesList:[],currentPage:null,totalPages:null,totalImages:null},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments[1];switch(t.type){case"ON_INPUT_ENTER_KEY_DOWN":return n({},e,{searchValue:t.payload.searchValue,routes:{path:"/search"}});case"ON_HEADER_SEARCH_BOX_FOCUS":return n({},e,{isNavigating:!1});case"ON_HEADER_SEARCH_BOX_BLUR":return n({},e,{isNavigating:!0});case"ON_TOGGLE_DOWNLOADS":return n({},e,{displayDownloads:!e.displayDownloads});case"ON_CLEAR_ALL_DOWNLOADS":return n({},e,{imagesQueue:[]});case"ON_ADD_IMAGE_TO_QUEUE":return n({},e,{imagesQueue:[].concat(o(e.imagesQueue),[e.currentImage])});case"ON_REMOVE_IMAGE_FROM_QUEUE":return n({},e,{imagesQueue:e.imagesQueue.filter(function(e,r){return r!==Number(t.payload.id)})});case"ON_END_OF_LIST":return n({},e,{currentImageId:0});case"ON_FETCH_IMAGES":return n({},e,{currentPage:t.payload.currentPage});case"ON_FETCH_IMAGES_SUCCESS":var r=1===e.currentPage,a=r?0:e.currentImageId,s=r?t.payload.images.results:[].concat(o(e.imagesList),o(t.payload.images.results)),i=r?t.payload.images.results[a]:e.imagesList[a];return n({},e,{imagesList:s,currentImage:i,currentImageId:a,isNavigating:!0,nextImage:t.payload.images.results[a+1],totalPages:t.payload.images.total_pages,totalImages:t.payload.images.total});case"ON_LOAD_NEXT_IMAGE":return n({},e,{currentImage:e.imagesList[e.currentImageId+1],nextImage:e.imagesList[e.currentImageId+2],currentImageId:e.currentImageId+1});default:return e}},b=(0,s.createStore)(S),I=O.querySelector("body"),A=O.querySelector("header"),C=A.querySelector(".actions"),D=A.querySelector(".downloads"),L=I.querySelector(".single"),M=L.querySelector("footer");b.subscribe(function(e,t){var r=n({dispatch:b.dispatch},e),a=O.querySelector("#search"),o=L.querySelector("#on-boarding");"/"!==e.routes.path||(0,i.exists)(a)||L.appendChild((0,p.default)(r)),"/"!==e.routes.path&&(0,i.exists)(a)&&a.parentNode.removeChild(a);var s=localStorage.getItem("first_load"),d=A.querySelector(".search");"/search"!==e.routes.path||(0,i.exists)(d)||A.insertBefore((0,f.default)(r),C),"/search"!==e.routes.path||(0,i.exists)(o)||(0,i.exists)(s)||(L.appendChild((0,g.default)(r)),localStorage.setItem("first_load",!1));var l=O.querySelector("#download"),_=D.querySelector(".full");e.displayDownloads&&(0,i.exists)(l)&&(l.parentNode.removeChild(l),I.appendChild((0,c.default)(r))),e.imagesQueue.length>0&&!(0,i.exists)(_)&&D.appendChild((0,m.default)(r)),0===e.imagesQueue.length&&(0,i.exists)(_)&&_.parentNode.removeChild(_),e.displayDownloads&&!(0,i.exists)(l)&&I.appendChild((0,c.default)(r)),!e.displayDownloads&&(0,i.exists)(l)&&l.parentNode.removeChild(l);var N=M.querySelector(".user"),y=N.querySelector(".photo"),v=N.querySelector(".name");(0,i.exists)(e.currentImage)&&(L.setAttribute("style","background-image: url("+e.currentImage.urls.thumb+")"),L.classList.add("loading"),y.setAttribute("style","background-image: url("+e.currentImage.user.profile_image.small+")"),v.innerText=e.currentImage.user.name);var E=e.currentImageId===e.imagesList.length-2,S=e.imagesList.length/10===e.currentPage,P=e.imagesList.length!==e.totalImages;switch(E&&S&&P&&b.dispatch({type:"ON_FETCH_IMAGES",payload:{currentPage:e.currentPage+1}}),e.currentImageId+1===e.imagesList.length&&0!==e.imagesList.length&&b.dispatch({type:"ON_END_OF_LIST"}),t.type){case"ON_INPUT_ENTER_KEY_DOWN":window.history.pushState("","","search?q="+e.searchValue),b.dispatch({type:"ON_FETCH_IMAGES",payload:{currentPage:1}});break;case"ON_KEY_UP_SPACE_BAR":if(!e.isNavigating)break;b.dispatch({type:"ON_LOAD_NEXT_IMAGE"});break;case"ON_KEY_UP_S":if(!e.isNavigating)break;if(e.imagesQueue.some(function(t){return t.id===e.currentImage.id}))break;b.dispatch({type:"ON_ADD_IMAGE_TO_QUEUE"});break;case"ON_ADD_IMAGE_TO_QUEUE":I.insertBefore((0,h.default)(r),A),setTimeout(function(){var e=I.querySelector("#save");e.parentNode.removeChild(e)},300);break;case"ON_FETCH_IMAGES":var x=new XMLHttpRequest;x.addEventListener("load",function(){b.dispatch({type:"ON_FETCH_IMAGES_SUCCESS",payload:{images:JSON.parse(this.responseText)}})}),x.open("GET",(0,u.url)(e.currentPage,e.searchValue)),x.send();break;case"ON_FETCH_IMAGES_SUCCESS":var U=d.querySelector("input");(0,i.exists)(U)&&U.blur();break;default:return!1}}),window.addEventListener("load",function(){b.dispatch({type:"ON_WINDOW_LOAD"})}),window.addEventListener("keyup",function(e){32===e.keyCode&&b.dispatch({type:"ON_KEY_UP_SPACE_BAR"}),83===e.keyCode&&b.dispatch({type:"ON_KEY_UP_S"})}),D.addEventListener("click",function(){b.dispatch({type:"ON_TOGGLE_DOWNLOADS"})})},{"./components/Downloads":2,"./components/Full":3,"./components/OnBoarding":4,"./components/SaveIcon":5,"./components/SearchBoxHeader":6,"./components/SearchBoxMain":7,"./constants":8,"./helpers":10,"./helpers/store":11}],2:[function(e,t,r){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(r,"__esModule",{value:!0});var o=e("../helpers/Node"),n=function(e){var t=e.dispatch,r=e.imagesQueue,n=function(){t({type:"ON_CLEAR_ALL_DOWNLOADS"})},s=function(){t({type:"ON_DOWNLOAD_ALL_DOWNLOADS"})},i=function(e){e.target.parentNode.id.length&&("remove"===e.target.attributes[0].nodeValue&&t({type:"ON_REMOVE_IMAGE_FROM_QUEUE",payload:{id:e.target.parentNode.id}}),"download"===e.target.attributes[0].nodeValue&&t({type:"ON_DOWNLOAD_IMAGE_FROM_QUEUE",payload:{id:e.target.parentNode.id}}))};return(0,o.Node)("div",{id:"download"},(0,o.Node)("div",{class:"header"},(0,o.Node)("div",{class:"title"},"My Collection"),(0,o.Node)("div",{class:"clear",onClick:n},"Clear all")),(0,o.Node)("div",{class:"arrow"}),(0,o.Node)("div",{class:"images"},(0,o.Node)("div",{class:"content"},o.Node.apply(void 0,["ul",{onClick:i}].concat(a(r.map(function(e,t){return(0,o.Node)("li",{class:"image",style:"background: url('"+e.urls.thumb+"')"},(0,o.Node)("div",{class:"actions",id:t},(0,o.Node)("div",{class:"remove"}),(0,o.Node)("div",{class:"download"})))})))))),(0,o.Node)("div",{class:"footer"},(0,o.Node)("button",{onClick:s},"Download selection")))};r.default=n},{"../helpers/Node":9}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=e("../helpers/Node"),o=function(){return(0,a.Node)("div",{class:"full"})};r.default=o},{"../helpers/Node":9}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=e("../helpers/Node"),o=function(e){return(0,a.Node)("div",{id:"on-boarding"},(0,a.Node)("div",{class:"image"}),(0,a.Node)("div",{class:"caption"},"Press spacebar to generate a photo"),(0,a.Node)("div",{class:"footer"},(0,a.Node)("div",{class:"skip"},"Skip"),(0,a.Node)("div",{class:"nav"},(0,a.Node)("ul",null,(0,a.Node)("li"),(0,a.Node)("li"),(0,a.Node)("li"))),(0,a.Node)("div",{class:"next"},"Next")))};r.default=o},{"../helpers/Node":9}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=e("../helpers/Node"),o=function(){return(0,a.Node)("div",{id:"save"},(0,a.Node)("i",{class:"icon"}))};r.default=o},{"../helpers/Node":9}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=e("../helpers/Node"),o=function(e){var t=e.dispatch,r=e.searchValue,o=function(){t({type:"ON_HEADER_SEARCH_BOX_FOCUS"})},n=function(){t({type:"ON_HEADER_SEARCH_BOX_BLUR"})},s=function(e){13===e.keyCode&&t({type:"ON_INPUT_ENTER_KEY_DOWN",payload:{searchValue:e.target.value}})};return(0,a.Node)("div",{class:"search"},(0,a.Node)("div",{class:"search-box"},(0,a.Node)("i",{class:"icon"}),(0,a.Node)("input",{type:"text",value:r,onKeyUp:s,onFocus:o,onBlur:n})))};r.default=o},{"../helpers/Node":9}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=e("../helpers/Node"),o=function(e){var t=e.dispatch,r=function(e){13===e.keyCode&&t({type:"ON_INPUT_ENTER_KEY_DOWN",payload:{searchValue:e.target.value}})};return(0,a.Node)("div",{id:"search"},(0,a.Node)("div",{class:"search-box",onKeyUp:r},(0,a.Node)("div",{class:"icon"}),(0,a.Node)("input",{type:"text",placeholder:"Search photos",autofocus:!0})))};r.default=o},{"../helpers/Node":9}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=r.clientId="6322e07de0e155ba0d9eca8d67cf27bb9b45417f2feb1a234baa363a1dda3dbe";r.url=function(e,t){return"https://api.unsplash.com/search/photos?client_id="+a+"&page="+e+"&query="+t}},{}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Node=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=e("../app"),n={onClick:"click",onKeyUp:"keyup",onLoad:"load",onFocus:"focus",onBlur:"blur"};r.Node=function(e,t){for(var r=arguments.length,s=Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];var u=o.d.createElement(e);return null!=t&&Object.keys(t).forEach(function(e){n.hasOwnProperty(e)?u.addEventListener(n[e],t[e]):u.setAttribute(e,t[e])}),s.length>0&&s.forEach(function(e){"string"==typeof e&&(u.innerHTML=e),"object"===(void 0===e?"undefined":a(e))&&u.appendChild(e)}),u}},{"../app":1}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.exists=function(e){return null!=e}},{}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.createStore=function(e){var t=void 0,r=[];return{dispatch:function(a){t=e(t,a),console.log(a,t),r.forEach(function(e){return e(t,a)})},getState:function(){return t},subscribe:function(e){r.push(e)}}}},{}]},{},[1]);
//# sourceMappingURL=app.min.js.map
