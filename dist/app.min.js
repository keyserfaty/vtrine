!function e(t,r,a){function o(s,i){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!i&&u)return u(s,!0);if(n)return n(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=r[s]={exports:{}};t[s][0].call(d.exports,function(e){var r=t[s][1][e];return o(r||e)},d,d.exports,e,t,r,a)}return r[s].exports}for(var n="function"==typeof require&&require,s=0;s<a.length;s++)o(a[s]);return o}({1:[function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.d=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},n=e("./reducer"),s=e("./helpers"),i=e("./constants"),u=e("./components/Downloads"),c=a(u),d=e("./components/SearchBoxMain"),l=a(d),p=e("./components/SearchBoxHeader"),_=a(p),f=e("./components/OnBoarding"),N=(a(f),e("./components/SaveIcon")),g=a(N),h=e("./components/Full"),y=a(h),v=r.d=document,m=v.querySelector("body"),O=v.querySelector("header"),E=O.querySelector(".actions"),S=O.querySelector(".downloads"),b=m.querySelector(".image"),I=m.querySelector("footer");n.store.subscribe(function(e,t){var r=o({dispatch:n.store.dispatch},e),a=v.querySelector("#search");b.querySelector("#on-boarding");"/"!==e.routes.path||(0,s.exists)(a)||b.appendChild((0,l.default)(r)),"/"!==e.routes.path&&(0,s.exists)(a)&&a.parentNode.removeChild(a);var u=(localStorage.getItem("first_load"),O.querySelector(".search"));"/search"!==e.routes.path||(0,s.exists)(u)||O.insertBefore((0,_.default)(r),E);var d=v.querySelector("#download"),p=S.querySelector(".full");e.displayDownloads&&(0,s.exists)(d)&&(d.parentNode.removeChild(d),m.appendChild((0,c.default)(r))),e.imagesQueue.length>0&&!(0,s.exists)(p)&&S.appendChild((0,y.default)(r)),0===e.imagesQueue.length&&(0,s.exists)(p)&&p.parentNode.removeChild(p),e.displayDownloads&&!(0,s.exists)(d)&&m.appendChild((0,c.default)(r)),!e.displayDownloads&&(0,s.exists)(d)&&d.parentNode.removeChild(d);var f=I.querySelector(".user"),N=f.querySelector(".photo"),h=f.querySelector(".name");(0,s.exists)(e.currentImage)&&(e.currentImage.src.then(function(t){b.setAttribute("style","background: "+e.currentImage.color+" url('"+t+"') no-repeat; background-size: cover;")}),b.classList.add("loading"),N.setAttribute("style","background-image: url("+e.currentImage.user.profile_image.small+")"),h.innerText=e.currentImage.user.name);var A=e.currentImageId===e.imagesList.length-2,C=e.imagesList.length/10===e.currentPage,D=e.imagesList.length!==e.totalImages;switch(A&&C&&D&&n.store.dispatch({type:"ON_FETCH_IMAGES",payload:{currentPage:e.currentPage+1}}),e.currentImageId+1===e.imagesList.length&&0!==e.imagesList.length&&n.store.dispatch({type:"ON_END_OF_LIST"}),t.type){case"ON_INPUT_ENTER_KEY_DOWN":window.history.pushState("","","search?q="+e.searchValue),n.store.dispatch({type:"ON_FETCH_IMAGES",payload:{currentPage:1}});break;case"ON_KEY_UP_SPACE_BAR":if(!e.isNavigating)break;n.store.dispatch({type:"ON_LOAD_NEXT_IMAGE"});break;case"ON_KEY_UP_S":if(!e.isNavigating)break;if(e.imagesQueue.some(function(t){return t.id===e.currentImage.id}))break;n.store.dispatch({type:"ON_ADD_IMAGE_TO_QUEUE"});break;case"ON_ADD_IMAGE_TO_QUEUE":m.insertBefore((0,g.default)(r),O),setTimeout(function(){var e=m.querySelector("#save");e.parentNode.removeChild(e)},300);break;case"ON_FETCH_IMAGES":var L=new XMLHttpRequest;L.addEventListener("load",function(){n.store.dispatch({type:"ON_FETCH_IMAGES_SUCCESS",payload:{images:JSON.parse(this.responseText)}})}),L.open("GET",(0,i.url)(e.currentPage,e.searchValue)),L.send();break;case"ON_FETCH_IMAGES_SUCCESS":var M=u.querySelector("input");(0,s.exists)(M)&&M.blur();break;default:return!1}}),window.addEventListener("load",function(){n.store.dispatch({type:"ON_WINDOW_LOAD"})}),window.addEventListener("keyup",function(e){32===e.keyCode&&n.store.dispatch({type:"ON_KEY_UP_SPACE_BAR"}),83===e.keyCode&&n.store.dispatch({type:"ON_KEY_UP_S"})}),S.addEventListener("click",function(){n.store.dispatch({type:"ON_TOGGLE_DOWNLOADS"})})},{"./components/Downloads":2,"./components/Full":3,"./components/OnBoarding":4,"./components/SaveIcon":5,"./components/SearchBoxHeader":6,"./components/SearchBoxMain":7,"./constants":8,"./helpers":10,"./reducer":12}],2:[function(e,t,r){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(r,"__esModule",{value:!0});var o=e("../helpers/Node"),n=function(e){var t=e.dispatch,r=e.imagesQueue,n=function(){t({type:"ON_CLEAR_ALL_DOWNLOADS"})},s=function(){t({type:"ON_DOWNLOAD_ALL_DOWNLOADS"})},i=function(e){e.target.parentNode.id.length&&("remove"===e.target.attributes[0].nodeValue&&t({type:"ON_REMOVE_IMAGE_FROM_QUEUE",payload:{id:e.target.parentNode.id}}),"download"===e.target.attributes[0].nodeValue&&t({type:"ON_DOWNLOAD_IMAGE_FROM_QUEUE",payload:{id:e.target.parentNode.id}}))};return(0,o.Node)("div",{id:"download"},(0,o.Node)("div",{class:"header"},(0,o.Node)("div",{class:"title"},"My Collection"),(0,o.Node)("div",{class:"clear",onClick:n},"Clear all")),(0,o.Node)("div",{class:"arrow"}),(0,o.Node)("div",{class:"images"},(0,o.Node)("div",{class:"content"},o.Node.apply(void 0,["ul",{onClick:i}].concat(a(r.map(function(e,t){return(0,o.Node)("li",{class:"image",style:"background: url('"+e.urls.thumb+"')"},(0,o.Node)("div",{class:"actions",id:t},(0,o.Node)("div",{class:"remove"}),(0,o.Node)("div",{class:"download"})))})))))),(0,o.Node)("div",{class:"footer"},(0,o.Node)("button",{onClick:s},"Download selection")))};r.default=n},{"../helpers/Node":9}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=e("../helpers/Node"),o=function(){return(0,a.Node)("div",{class:"full"})};r.default=o},{"../helpers/Node":9}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=e("../helpers/Node"),o=function(e){return(0,a.Node)("div",{id:"on-boarding"},(0,a.Node)("div",{class:"image"}),(0,a.Node)("div",{class:"caption"},"Press spacebar to generate a photo"),(0,a.Node)("div",{class:"footer"},(0,a.Node)("div",{class:"skip"},"Skip"),(0,a.Node)("div",{class:"nav"},(0,a.Node)("ul",null,(0,a.Node)("li"),(0,a.Node)("li"),(0,a.Node)("li"))),(0,a.Node)("div",{class:"next"},"Next")))};r.default=o},{"../helpers/Node":9}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=e("../helpers/Node"),o=function(){return(0,a.Node)("div",{id:"save"},(0,a.Node)("i",{class:"icon"}))};r.default=o},{"../helpers/Node":9}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=e("../helpers/Node"),o=function(e){var t=e.dispatch,r=e.searchValue,o=function(){t({type:"ON_HEADER_SEARCH_BOX_FOCUS"})},n=function(){t({type:"ON_HEADER_SEARCH_BOX_BLUR"})},s=function(e){13===e.keyCode&&t({type:"ON_INPUT_ENTER_KEY_DOWN",payload:{searchValue:e.target.value}})};return(0,a.Node)("div",{class:"search"},(0,a.Node)("div",{class:"search-box"},(0,a.Node)("i",{class:"icon"}),(0,a.Node)("input",{type:"text",value:r,onKeyUp:s,onFocus:o,onBlur:n})))};r.default=o},{"../helpers/Node":9}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=e("../helpers/Node"),o=function(e){var t=e.dispatch,r=function(e){13===e.keyCode&&t({type:"ON_INPUT_ENTER_KEY_DOWN",payload:{searchValue:e.target.value}})};return(0,a.Node)("div",{id:"search"},(0,a.Node)("div",{class:"search-box",onKeyUp:r},(0,a.Node)("div",{class:"icon"}),(0,a.Node)("input",{type:"text",placeholder:"Search photos",autofocus:!0})))};r.default=o},{"../helpers/Node":9}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=r.clientId="6322e07de0e155ba0d9eca8d67cf27bb9b45417f2feb1a234baa363a1dda3dbe";r.url=function(e,t){return"https://api.unsplash.com/search/photos?client_id="+a+"&page="+e+"&query="+t}},{}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Node=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=e("../app"),n={onClick:"click",onKeyUp:"keyup",onLoad:"load",onFocus:"focus",onBlur:"blur"};r.Node=function(e,t){for(var r=arguments.length,s=Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];var u=o.d.createElement(e);return null!=t&&Object.keys(t).forEach(function(e){n.hasOwnProperty(e)?u.addEventListener(n[e],t[e]):u.setAttribute(e,t[e])}),s.length>0&&s.forEach(function(e){"string"==typeof e&&(u.innerHTML=e),"object"===(void 0===e?"undefined":a(e))&&u.appendChild(e)}),u}},{"../app":1}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=(r.exists=function(e){return null!=e},function(e){return new Promise(function(t,r){var a=new Image;a.onload=function(){t(e)},a.onerror=function(e){r(e)},a.src=e})});r.preCachedImages=function(e){return e.map(function(e){return a(e)})}},{}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.createStore=function(e){var t=void 0,r=[];return{dispatch:function(a){t=e(t,a),console.log(a,t),r.forEach(function(e){return e(t,a)})},getState:function(){return t},subscribe:function(e){r.push(e)}}}},{}],12:[function(e,t,r){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.store=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},n=e("./helpers/store"),s=e("./helpers"),i={routes:{path:"/"},searchValue:"",displayDownloads:!1,isNavigating:!1,imagesQueue:[],currentImage:null,currentImageId:0,nextImage:null,imagesList:[],preCachedImages:[],currentPage:null,totalPages:null,totalImages:null},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case"ON_INPUT_ENTER_KEY_DOWN":return o({},e,{searchValue:t.payload.searchValue,routes:{path:"/search"}});case"ON_HEADER_SEARCH_BOX_FOCUS":return o({},e,{isNavigating:!1});case"ON_HEADER_SEARCH_BOX_BLUR":return o({},e,{isNavigating:!0});case"ON_TOGGLE_DOWNLOADS":return o({},e,{displayDownloads:!e.displayDownloads});case"ON_CLEAR_ALL_DOWNLOADS":return o({},e,{imagesQueue:[]});case"ON_ADD_IMAGE_TO_QUEUE":return o({},e,{imagesQueue:[].concat(a(e.imagesQueue),[e.currentImage])});case"ON_REMOVE_IMAGE_FROM_QUEUE":return o({},e,{imagesQueue:e.imagesQueue.filter(function(e,r){return r!==Number(t.payload.id)})});case"ON_END_OF_LIST":return o({},e,{currentImageId:0});case"ON_FETCH_IMAGES":return o({},e,{currentPage:t.payload.currentPage});case"ON_FETCH_IMAGES_SUCCESS":var r=1===e.currentPage,n=r?0:e.currentImageId,u=r?t.payload.images.results:[].concat(a(e.imagesList),a(t.payload.images.results)),c=u.map(function(e){return e.urls.thumb}),d=(0,s.preCachedImages)(c);return o({},e,{imagesList:u,currentImageId:n,currentImage:o({},u[n],{src:d[n]}),preCacheImages:d,isNavigating:!0,totalPages:t.payload.images.total_pages,totalImages:t.payload.images.total});case"ON_LOAD_NEXT_IMAGE":return o({},e,{currentImage:o({},e.imagesList[e.currentImageId+1],{src:e.preCacheImages[e.currentImageId+1]}),currentImageId:e.currentImageId+1});default:return e}};r.store=(0,n.createStore)(u)},{"./helpers":10,"./helpers/store":11}]},{},[1]);