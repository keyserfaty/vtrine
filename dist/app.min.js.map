{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/app.js","src/components/Downloads.js","src/components/OnBoarding.js","src/components/SearchBoxMain.js","src/constants.js","src/helpers/Node.js","src/helpers/index.js","src/helpers/store.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_store","_helpers","_constants","_Downloads","_SearchBoxMain","_OnBoarding","d","document","initialState","routes","path","searchValue","displayDownloads","imagesQueue","imagesList","reducer","state","arguments","undefined","action","type","_extends","payload","concat","_toConsumableArray","image","filter","Number","id","images","store","createStore","body","querySelector","header","folder","single","subscribe","props","dispatch","searchBoxMainPreviousNode","onBoardingNode","exists","appendChild","_SearchBoxMain2","default","parentNode","removeChild","isFirstLoad","localStorage","getItem","_OnBoarding2","setItem","downloadPreviousNode","_Downloads2","window","history","pushState","xml","XMLHttpRequest","addEventListener","JSON","parse","this","responseText","open","url","clientId","send","keyCode","_Node","Downloads","clearOnClick","buttonOnClick","ulOnClick","target","attributes","nodeValue","Node","class","onClick","apply","map","style","OnBoarding","SearchBoxMain","onKeyupInput","value","onKeyUp","placeholder","_app","EVENTS","onLoad","elem","attrs","_len","children","Array","_key","node","createElement","Object","keys","forEach","key","hasOwnProperty","setAttribute","child","innerHTML","_typeof","subscribers","console","log","handle","getState","handler","push"],"mappings":"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","file":"app.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import { createStore } from './helpers/store'\nimport { exists } from './helpers'\nimport { clientId, url } from './constants'\n\nimport Downloads from './components/Downloads'\nimport SearchBoxMain from './components/SearchBoxMain'\nimport OnBoarding from './components/OnBoarding'\n\nexport const d = document\n\n// model\nconst initialState = {\n  routes: {\n    path: '/'\n  },\n  searchValue: '',\n  displayDownloads: false,\n  imagesQueue: ['./statics/images/1.jpg', './statics/images/1.jpg'],\n  imagesList: [],\n}\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case 'ON_INPUT_ENTER_KEY_DOWN': {\n      return {\n        ...state,\n        searchValue: action.payload.searchValue,\n        routes: {\n          path: '/search'\n        }\n      }\n    }\n\n    case 'ON_TOGGLE_DOWNLOADS': {\n      return {\n        ...state,\n        displayDownloads: !state.displayDownloads,\n      }\n    }\n\n    case 'ON_CLEAR_ALL_DOWNLOADS': {\n      return {\n        ...state,\n        imagesQueue: [],\n      }\n    }\n\n    case 'ON_ADD_IMAGE_TO_QUEUE': {\n      return {\n        ...state,\n        imagesQueue: [\n          ...state.imagesQueue,\n          ...action.payload.image\n        ]\n      }\n    }\n\n    case 'ON_REMOVE_IMAGE_FROM_QUEUE': {\n      return {\n        ...state,\n        imagesQueue: state.imagesQueue\n          .filter((image, i) => i !== Number(action.payload.id))\n      }\n    }\n\n    case 'ON_NEW_IMAGES': {\n      return {\n        ...state,\n        imagesList: action.payload.images\n      }\n    }\n\n    default:\n      return state\n  }\n}\n\nconst store = createStore(reducer)\n\n// view\nconst body = d.querySelector('body')\nconst header = d.querySelector('header')\nconst folder = header.querySelector('.downloads')\nconst single = body.querySelector('.single')\n\nstore.subscribe((state, action) => {\n  const props = {\n    dispatch: store.dispatch,\n    ...state,\n  }\n\n  // route changes\n  const searchBoxMainPreviousNode = d.querySelector('#search')\n  const onBoardingNode = single.querySelector('#on-boarding')\n\n  if (state.routes.path === '/' && !exists(searchBoxMainPreviousNode)) {\n    single.appendChild(SearchBoxMain(props))\n  }\n\n  if (state.routes.path !== '/' && exists(searchBoxMainPreviousNode)) {\n    searchBoxMainPreviousNode.parentNode.removeChild(searchBoxMainPreviousNode)\n  }\n\n  const isFirstLoad = localStorage.getItem('first_load')\n\n  if (state.routes.path === '/search' && !exists(onBoardingNode) && !exists(isFirstLoad)) {\n    single.appendChild(OnBoarding(props))\n    localStorage.setItem('first_load', false)\n  }\n\n  // imagesQueue changes\n  const downloadPreviousNode = d.querySelector('#download')\n\n  if (state.displayDownloads && exists(downloadPreviousNode)) {\n    downloadPreviousNode.parentNode.removeChild(downloadPreviousNode)\n    body.appendChild(Downloads(props))\n  }\n\n  // displayDownloads changes\n  if (state.displayDownloads && !exists(downloadPreviousNode)) {\n    body.appendChild(Downloads(props))\n  }\n\n  if (!state.displayDownloads && exists(downloadPreviousNode)) {\n    downloadPreviousNode.parentNode.removeChild(downloadPreviousNode)\n  }\n\n  switch (action.type) {\n    case 'ON_INPUT_ENTER_KEY_DOWN': {\n      window.history.pushState('', '', 'search?q=' + state.searchValue)\n      store.dispatch({ type: 'ON_FETCH_IMAGES' })\n      break\n    }\n\n    case 'ON_FETCH_IMAGES': {\n      const xml = new XMLHttpRequest();\n\n      xml.addEventListener('load', function () {\n          store.dispatch({\n            type: 'ON_NEW_IMAGES',\n            payload: {\n              images: JSON.parse(this.responseText)\n            }\n          })\n        }\n      );\n      xml.open('GET', url + clientId);\n      xml.send();\n\n      break\n    }\n\n    default:\n      return false\n  }\n})\n\n// events\nwindow.addEventListener('load', () => {\n  store.dispatch({ type: 'ON_WINDOW_LOAD' })\n})\n\nwindow.addEventListener('keyup', function (e) {\n  if (e.keyCode === 32) {\n    store.dispatch({\n      type: 'ON_SPACE_BAR'\n    })\n  }\n})\n\nfolder.addEventListener('click', () => {\n  store.dispatch({ type: 'ON_TOGGLE_DOWNLOADS' })\n})\n","import { Node } from '../helpers/Node'\n\nconst Downloads = props => {\n  const {\n    dispatch,\n    imagesQueue,\n  } = props\n\n  // Events\n  const clearOnClick = () => {\n    dispatch({ type: 'ON_CLEAR_ALL_DOWNLOADS' })\n  }\n\n  const buttonOnClick = () => {\n    dispatch({ type: 'ON_DOWNLOAD_ALL_DOWNLOADS' })\n  }\n\n  const ulOnClick = e => {\n    if (e.target.parentNode.id.length) {\n      if (e.target.attributes[0].nodeValue === 'remove') {\n        dispatch({type: 'ON_REMOVE_IMAGE_FROM_QUEUE', payload: {id: e.target.parentNode.id}})\n      }\n\n      if (e.target.attributes[0].nodeValue === 'download') {\n        dispatch({type: 'ON_DOWNLOAD_IMAGE_FROM_QUEUE', payload: {id: e.target.parentNode.id}})\n      }\n    }\n  }\n\n  // DOM\n  return (\n    Node('div', { id: 'download' },\n      Node('div', { class: 'header' },\n        Node('div', { class: 'title' }, 'My Collection'),\n        Node('div', { class: 'clear', onClick: clearOnClick }, 'Clear all')),\n      Node('div', { class: 'arrow' }),\n      Node('div', { class: 'images' },\n        Node('div', { class: 'content' },\n          Node('ul', { onClick: ulOnClick },\n            ...imagesQueue.map((image, i) =>\n              Node('li', { class: 'image', style: `background: url('${image}')` },\n                Node('div', { class: 'actions', id: i },\n                  Node('div', { class: 'remove' }), Node('div', { class: 'download' })))\n            )))),\n      Node('div', { class: 'footer' },\n        Node('button', { onClick: buttonOnClick }, 'Download selection')\n      )\n    )\n  )\n}\n\nexport default Downloads\n","import { Node } from '../helpers/Node'\n\nconst OnBoarding = props => {\n  return (\n    Node('div', { id: 'on-boarding' },\n      Node('div', { class: 'image' }),\n      Node('div', { class: 'caption' }, 'Press spacebar to generate a photo'),\n      Node('div', { class: 'footer' },\n        Node('div', { class: 'skip' }, 'Skip'),\n        Node('div', { class: 'nav' },\n          Node('ul', null,\n            Node('li'), Node('li'), Node('li'))),\n        Node('div', { class: 'next' }, 'Next')))\n  )\n}\n\nexport default OnBoarding\n","import { Node } from '../helpers/Node'\n\nconst SearchBoxMain = props => {\n  const { dispatch } = props\n\n  const onKeyupInput = e => {\n    if (e.keyCode === 13) {\n      dispatch({\n        type: 'ON_INPUT_ENTER_KEY_DOWN',\n        payload: {\n          searchValue: e.target.value,\n        }\n      })\n    }\n  }\n\n  return (\n    Node('div', { id: 'search' },\n      Node('div', { class: 'search-box', onKeyUp: onKeyupInput },\n        Node('div', { class: 'icon' }),\n        Node('input', { type: 'text', placeholder: 'Search photos' }))\n    )\n  )\n}\n\nexport default SearchBoxMain\n","export const url = 'https://api.unsplash.com/photos/?client_id='\nexport const clientId = '6322e07de0e155ba0d9eca8d67cf27bb9b45417f2feb1a234baa363a1dda3dbe'\n","import { d } from '../app'\n\nconst EVENTS = {\n  onClick: 'click',\n  onKeyUp: 'keyup',\n  onLoad: 'load'\n}\n\nexport const Node = (elem, attrs, ...children) => {\n  let node = d.createElement(elem)\n\n  if (attrs != null) {\n    Object.keys(attrs).forEach(key => {\n      if (EVENTS.hasOwnProperty(key)) {\n        node.addEventListener(EVENTS[key], attrs[key])\n      } else {\n        node.setAttribute(key, attrs[key])\n      }\n    })\n  }\n\n  if (children.length > 0) {\n    children.forEach(child => {\n      if (typeof child === 'string') {\n        node.innerHTML = child\n      }\n\n      if (typeof child === 'object') {\n        node.appendChild(child)\n      }\n    })\n  }\n\n  return node\n}\n","export const exists = node => node != null\n","export const createStore = function createStoreFn (reducer) {\n  let state = undefined\n  let subscribers = []\n\n  return {\n    dispatch: function (action) {\n      state = reducer(state, action)\n      console.log(action, state)\n      subscribers.forEach(function (handle) {\n        return handle(state, action)\n      })\n    },\n    getState: function () {\n      return state\n    },\n    subscribe: function (handler) {\n      subscribers.push(handler)\n    }\n  }\n}\n"]}