{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/app.js","src/components/Downloads.js","src/components/Full.js","src/components/OnBoarding.js","src/components/SaveIcon.js","src/components/SearchBoxHeader.js","src/components/SearchBoxMain.js","src/constants.js","src/helpers/Node.js","src/helpers/index.js","src/helpers/store.js","src/reducer.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_reducer","_helpers","_constants","_Downloads","_SearchBoxMain","_SearchBoxHeader","_OnBoarding","_SaveIcon","_Full","d","document","body","querySelector","header","actions","folder","image","footer","store","subscribe","state","action","props","_extends","dispatch","searchBoxMainPreviousNode","routes","path","exists","appendChild","_SearchBoxMain2","default","parentNode","removeChild","searchBoxHeaderNode","localStorage","getItem","insertBefore","_SearchBoxHeader2","downloadPreviousNode","downloadFullNode","displayDownloads","_Downloads2","imagesQueue","_Full2","userNode","userPhotoNode","userNameNode","loadingBar","currentImage","id","classList","remove","add","src","then","setAttribute","color","imageURI","request","XMLHttpRequest","onprogress","lengthComputable","loaded","total","onload","base64Encode","responseText","onloadend","open","overrideMimeType","send","urls","full","user","profile_image","small","innerText","name","isTwoImagesAwayFromEnd","currentImageId","imagesList","isNotInNewPage","currentPage","haveNotFetchedAllImages","totalImages","type","payload","window","history","pushState","searchValue","isNavigating","some","_SaveIcon2","setTimeout","saveIconNode","xml","addEventListener","images","JSON","parse","this","url","searchBoxHeaderInputNode","blur","keyCode","_Node","Downloads","clearOnClick","buttonOnClick","ulOnClick","target","attributes","nodeValue","Node","class","onClick","apply","undefined","concat","_toConsumableArray","map","style","thumb","Full","OnBoarding","SaveIcon","SearchBoxHeader","onSearchBoxFocus","onSearchBoxBlur","onKeyupInput","value","onKeyUp","onFocus","onBlur","SearchBoxMain","placeholder","autofocus","clientId","page","query","_app","EVENTS","onLoad","elem","attrs","_len","arguments","children","Array","_key","node","createElement","Object","keys","forEach","key","hasOwnProperty","child","innerHTML","_typeof","imageLoader","Promise","resolve","reject","img","Image","onerror","err","preCachedImages","inputStr","b64","outputStr","enc3","enc4","byte1","charCodeAt","byte2","byte3","enc1","enc2","isNaN","charAt","createStore","reducer","subscribers","console","log","handle","getState","handler","push","_store","initialState","totalPages","filter","Number","isNewRequest","results","imagesFromList","item","preCacheImages","total_pages"],"mappings":"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","file":"app.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import { store } from './reducer'\n\nimport { exists, preCachedImages, base64Encode } from './helpers'\nimport { url } from './constants'\n\nimport Downloads from './components/Downloads'\nimport SearchBoxMain from './components/SearchBoxMain'\nimport SearchBoxHeader from './components/SearchBoxHeader'\nimport OnBoarding from './components/OnBoarding'\nimport SaveIcon from './components/SaveIcon'\nimport Full from './components/Full'\n\nexport const d = document\n\n// view\nconst body = d.querySelector('body')\nconst header = d.querySelector('header')\nconst actions = header.querySelector('.actions')\nconst folder = header.querySelector('.downloads')\nconst image = body.querySelector('.image')\nconst footer = body.querySelector('footer')\n\nstore.subscribe((state, action) => {\n  const props = {\n    dispatch: store.dispatch,\n    ...state,\n  }\n\n  // route changes\n  const searchBoxMainPreviousNode = d.querySelector('#search')\n  const onBoardingNode = image.querySelector('#on-boarding')\n\n  if (state.routes.path === '/' && !exists(searchBoxMainPreviousNode)) {\n    image.appendChild(SearchBoxMain(props))\n  }\n\n  if (state.routes.path !== '/' && exists(searchBoxMainPreviousNode)) {\n    searchBoxMainPreviousNode.parentNode.removeChild(searchBoxMainPreviousNode)\n  }\n\n  const isFirstLoad = localStorage.getItem('first_load')\n  const searchBoxHeaderNode = header.querySelector('.search')\n\n  if (state.routes.path === '/search' && !exists(searchBoxHeaderNode)) {\n    header.insertBefore(SearchBoxHeader(props), actions)\n  }\n\n  //if (state.routes.path === '/search' && !exists(onBoardingNode) && !exists(isFirstLoad)) {\n  //  image.appendChild(OnBoarding(props))\n  //  localStorage.setItem('first_load', false)\n  //}\n\n  // imagesQueue changes\n  const downloadPreviousNode = d.querySelector('#download')\n  const downloadFullNode = folder.querySelector('.full')\n\n  if (state.displayDownloads && exists(downloadPreviousNode)) {\n    downloadPreviousNode.parentNode.removeChild(downloadPreviousNode)\n    body.appendChild(Downloads(props))\n  }\n\n  if (state.imagesQueue.length > 0 && !exists(downloadFullNode)) {\n    folder.appendChild(Full(props))\n  }\n\n  if (state.imagesQueue.length === 0 && exists(downloadFullNode)) {\n    downloadFullNode.parentNode.removeChild(downloadFullNode)\n  }\n\n  // displayDownloads changes\n  if (state.displayDownloads && !exists(downloadPreviousNode)) {\n    body.appendChild(Downloads(props))\n  }\n\n  if (!state.displayDownloads && exists(downloadPreviousNode)) {\n    downloadPreviousNode.parentNode.removeChild(downloadPreviousNode)\n  }\n\n  const userNode = footer.querySelector('.user')\n  const userPhotoNode = userNode.querySelector('.photo')\n  const userNameNode = userNode.querySelector('.name')\n  const loadingBar = d.querySelector('.loading-bar')\n\n  // imagesList changes\n  if (exists(state.currentImage) && state.currentImage.id !== image.id) {\n    image.classList.remove('loaded')\n    image.classList.add('loading')\n\n    state.currentImage.src.then(src => {\n      image.setAttribute('style', `background: ${state.currentImage.color} url('${src}') no-repeat; background-size: cover;`)\n      image.setAttribute('id', state.currentImage.id)\n    })\n\n    function loadImage(imageURI) {\n      const request = new XMLHttpRequest();\n\n      request.onprogress = function (e) {\n        if (e.lengthComputable) {\n          loadingBar.setAttribute('style', 'width: ' + e.loaded / e.total * 100 + '%')\n        }\n      }\n      request.onload = function () {\n        image.setAttribute('style', `background: url(data:image/jpeg;base64,${base64Encode(request.responseText)}) no-repeat; background-size: cover;`)\n        image.classList.remove('loading')\n        image.classList.add('loaded')\n      }\n      request.onloadend = function () {\n        loadingBar.setAttribute('style', 'width: 0%')\n      }\n      request.open(\"GET\", imageURI, true);\n      request.overrideMimeType('text/plain; charset=x-user-defined');\n      request.send(null);\n    }\n\n    loadImage(state.currentImage.urls.full)\n\n    image.classList.add('loading')\n    userPhotoNode.setAttribute('style', 'background-image: url(' + state.currentImage.user.profile_image.small +')')\n    userNameNode.innerText = state.currentImage.user.name\n  }\n\n  // requesting new images\n  const isTwoImagesAwayFromEnd = state.currentImageId === state.imagesList.length - 2\n  const isNotInNewPage = state.imagesList.length / 10 === state.currentPage\n  const haveNotFetchedAllImages = state.imagesList.length !== state.totalImages\n\n  if (isTwoImagesAwayFromEnd && isNotInNewPage && haveNotFetchedAllImages) {\n    store.dispatch({\n      type: 'ON_FETCH_IMAGES',\n      payload: {\n        currentPage: state.currentPage + 1\n      }\n    })\n  }\n\n  if (state.currentImageId + 1 === state.imagesList.length && state.imagesList.length !== 0) {\n    store.dispatch({\n      type: 'ON_END_OF_LIST'\n    })\n  }\n\n  switch (action.type) {\n    case 'ON_INPUT_ENTER_KEY_DOWN': {\n      window.history.pushState('', '', 'search?q=' + state.searchValue)\n      store.dispatch({\n        type: 'ON_FETCH_IMAGES',\n        payload: {\n          currentPage: 1\n        }\n      })\n      break\n    }\n\n    case 'ON_KEY_UP_SPACE_BAR': {\n      if (!state.isNavigating) break\n      store.dispatch({ type: 'ON_LOAD_NEXT_IMAGE' })\n\n      break\n    }\n\n    case 'ON_KEY_UP_S': {\n      if (!state.isNavigating) break\n      if (state.imagesQueue.some(image => image.id === state.currentImage.id)) break\n\n      store.dispatch({ type: 'ON_ADD_IMAGE_TO_QUEUE' })\n\n      break\n    }\n\n    case 'ON_ADD_IMAGE_TO_QUEUE': {\n      body.insertBefore(SaveIcon(props), header)\n\n      setTimeout(() => {\n        const saveIconNode = body.querySelector('#save')\n        saveIconNode.parentNode.removeChild(saveIconNode)\n      }, 300)\n\n      break\n    }\n\n    case 'ON_FETCH_IMAGES': {\n      const xml = new XMLHttpRequest();\n\n      xml.addEventListener('load', function () {\n          store.dispatch({\n            type: 'ON_FETCH_IMAGES_SUCCESS',\n            payload: {\n              images: JSON.parse(this.responseText)\n            }\n          })\n        }\n      );\n      xml.open('GET', url(state.currentPage, state.searchValue));\n      xml.send();\n\n      break\n    }\n\n    case 'ON_FETCH_IMAGES_SUCCESS': {\n      const searchBoxHeaderInputNode = searchBoxHeaderNode.querySelector('input')\n      if (exists(searchBoxHeaderInputNode)) {\n        searchBoxHeaderInputNode.blur()\n      }\n\n      break\n    }\n\n    default:\n      return false\n  }\n})\n\n// events\nwindow.addEventListener('load', () => {\n  store.dispatch({ type: 'ON_WINDOW_LOAD' })\n})\n\nwindow.addEventListener('keyup', (e) => {\n  if (e.keyCode === 32) {\n    store.dispatch({\n      type: 'ON_KEY_UP_SPACE_BAR'\n    })\n  }\n\n  if (e.keyCode === 83) {\n    store.dispatch({\n      type: 'ON_KEY_UP_S'\n    })\n  }\n})\n\nfolder.addEventListener('click', () => {\n  store.dispatch({ type: 'ON_TOGGLE_DOWNLOADS' })\n})\n","import { Node } from '../helpers/Node'\n\nconst Downloads = props => {\n  const {\n    dispatch,\n    imagesQueue,\n  } = props\n\n  // Events\n  const clearOnClick = () => {\n    dispatch({ type: 'ON_CLEAR_ALL_DOWNLOADS' })\n  }\n\n  const buttonOnClick = () => {\n    dispatch({ type: 'ON_DOWNLOAD_ALL_DOWNLOADS' })\n  }\n\n  const ulOnClick = e => {\n    if (e.target.parentNode.id.length) {\n      if (e.target.attributes[0].nodeValue === 'remove') {\n        dispatch({type: 'ON_REMOVE_IMAGE_FROM_QUEUE', payload: {id: e.target.parentNode.id}})\n      }\n\n      if (e.target.attributes[0].nodeValue === 'download') {\n        dispatch({type: 'ON_DOWNLOAD_IMAGE_FROM_QUEUE', payload: {id: e.target.parentNode.id}})\n      }\n    }\n  }\n\n  // DOM\n  return (\n    Node('div', { id: 'download' },\n      Node('div', { class: 'header' },\n        Node('div', { class: 'title' }, 'My Collection'),\n        Node('div', { class: 'clear', onClick: clearOnClick }, 'Clear all')),\n      Node('div', { class: 'arrow' }),\n      Node('div', { class: 'images' },\n        Node('div', { class: 'content' },\n          Node('ul', { onClick: ulOnClick },\n            ...imagesQueue.map((image, i) =>\n              Node('li', { class: 'image', style: `background: url('${image.urls.thumb}')` },\n                Node('div', { class: 'actions', id: i },\n                  Node('div', { class: 'remove' }), Node('div', { class: 'download' })))\n            )))),\n      Node('div', { class: 'footer' },\n        Node('button', { onClick: buttonOnClick }, 'Download selection')\n      )\n    )\n  )\n}\n\nexport default Downloads\n","import { Node } from '../helpers/Node'\n\nconst Full = () => {\n  return (\n    Node('div', { class: 'full' })\n  )\n}\n\nexport default Full\n","import { Node } from '../helpers/Node'\n\nconst OnBoarding = props => {\n  return (\n    Node('div', { id: 'on-boarding' },\n      Node('div', { class: 'image' }),\n      Node('div', { class: 'caption' }, 'Press spacebar to generate a photo'),\n      Node('div', { class: 'footer' },\n        Node('div', { class: 'skip' }, 'Skip'),\n        Node('div', { class: 'nav' },\n          Node('ul', null,\n            Node('li'), Node('li'), Node('li'))),\n        Node('div', { class: 'next' }, 'Next')))\n  )\n}\n\nexport default OnBoarding\n","import { Node } from '../helpers/Node'\n\nconst SaveIcon = () => {\n  return (\n    Node('div', { id: 'save' },\n      Node('i', { class: 'icon' })\n    )\n  )\n}\n\nexport default SaveIcon\n","import { Node } from '../helpers/Node'\n\nconst SearchBoxHeader = props => {\n  const { dispatch, searchValue } = props\n\n  const onSearchBoxFocus = () => {\n    dispatch({ type: 'ON_HEADER_SEARCH_BOX_FOCUS' })\n  }\n\n  const onSearchBoxBlur = () => {\n    dispatch({ type: 'ON_HEADER_SEARCH_BOX_BLUR' })\n  }\n\n  const onKeyupInput = e => {\n    if (e.keyCode === 13) {\n      dispatch({\n        type: 'ON_INPUT_ENTER_KEY_DOWN',\n        payload: {\n          searchValue: e.target.value,\n        }\n      })\n    }\n  }\n\n  return (\n    Node('div', { class: 'search' },\n      Node('div', { class: 'search-box' },\n        Node('i', { class: 'icon' }),\n        Node('input', { type: 'text', value: searchValue, onKeyUp: onKeyupInput, onFocus: onSearchBoxFocus, onBlur: onSearchBoxBlur })\n      )\n    )\n  )\n}\n\nexport default SearchBoxHeader\n","import { Node } from '../helpers/Node'\n\nconst SearchBoxMain = props => {\n  const { dispatch } = props\n\n  const onKeyupInput = e => {\n    if (e.keyCode === 13) {\n      dispatch({\n        type: 'ON_INPUT_ENTER_KEY_DOWN',\n        payload: {\n          searchValue: e.target.value,\n        }\n      })\n    }\n  }\n\n  return (\n    Node('div', { id: 'search' },\n      Node('div', { class: 'search-box', onKeyUp: onKeyupInput },\n        Node('div', { class: 'icon' }),\n        Node('input', { type: 'text', placeholder: 'Search photos', autofocus: true }))\n    )\n  )\n}\n\nexport default SearchBoxMain\n","export const clientId = '6322e07de0e155ba0d9eca8d67cf27bb9b45417f2feb1a234baa363a1dda3dbe'\nexport const url = (page, query) => `https://api.unsplash.com/search/photos?client_id=${clientId}&page=${page}&query=${query}`\n","import { d } from '../app'\n\nconst EVENTS = {\n  onClick: 'click',\n  onKeyUp: 'keyup',\n  onLoad: 'load',\n  onFocus: 'focus',\n  onBlur: 'blur'\n}\n\nexport const Node = (elem, attrs, ...children) => {\n  let node = d.createElement(elem)\n\n  if (attrs != null) {\n    Object.keys(attrs).forEach(key => {\n      if (EVENTS.hasOwnProperty(key)) {\n        node.addEventListener(EVENTS[key], attrs[key])\n      } else {\n        node.setAttribute(key, attrs[key])\n      }\n    })\n  }\n\n  if (children.length > 0) {\n    children.forEach(child => {\n      if (typeof child === 'string') {\n        node.innerHTML = child\n      }\n\n      if (typeof child === 'object') {\n        node.appendChild(child)\n      }\n    })\n  }\n\n  return node\n}\n","export const exists = node => node != null\n\nconst imageLoader = src => {\n  return new Promise(function (resolve, reject) {\n    let img = new Image()\n    img.onload = function () {\n      resolve(src)\n    }\n    img.onerror = function (err) {\n      reject(err)\n    }\n    img.src = src\n  })\n}\n\n/**\n * Takes a list of images urls and returns a list\n * of promises of images loading\n * @param images\n */\nexport const preCachedImages = images => images\n  .map(image => imageLoader(image))\n\nexport const base64Encode = inputStr => {\n  var b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\"\n  var outputStr = \"\"\n  var i = 0\n\n  while (i < inputStr.length)\n  {\n    //all three \"& 0xff\" added below are there to fix a known bug \n    //with bytes returned by xhr.responseText\n    var byte1 = inputStr.charCodeAt(i++) & 0xff\n    var byte2 = inputStr.charCodeAt(i++) & 0xff\n    var byte3 = inputStr.charCodeAt(i++) & 0xff\n\n    var enc1 = byte1 >> 2\n    var enc2 = ((byte1 & 3) << 4) | (byte2 >> 4)\n\n    var enc3, enc4\n    if (isNaN(byte2))\n    {\n      enc3 = enc4 = 64\n    }\n    else\n    {\n      enc3 = ((byte2 & 15) << 2) | (byte3 >> 6)\n      if (isNaN(byte3))\n      {\n        enc4 = 64\n      }\n      else\n      {\n        enc4 = byte3 & 63\n      }\n    }\n\n    outputStr += b64.charAt(enc1) + b64.charAt(enc2) + b64.charAt(enc3) + b64.charAt(enc4)\n  }\n\n  return outputStr\n}\n","export const createStore = function createStoreFn (reducer) {\n  let state = undefined\n  let subscribers = []\n\n  return {\n    dispatch: function (action) {\n      state = reducer(state, action)\n      console.log(action, state)\n      subscribers.forEach(function (handle) {\n        return handle(state, action)\n      })\n    },\n    getState: function () {\n      return state\n    },\n    subscribe: function (handler) {\n      subscribers.push(handler)\n    }\n  }\n}\n","import { createStore } from './helpers/store'\nimport { preCachedImages } from './helpers'\n\n// model\nconst initialState = {\n  // routing\n  routes: {\n    path: '/'\n  },\n\n  // ui\n  searchValue: '',\n  displayDownloads: false,\n  isNavigating: false,\n  imagesQueue: [],\n  currentImage: null,\n  currentImageId: 0,\n\n  // async\n  imagesList: [],\n  preCachedImages: [],\n  currentPage: null,\n  totalPages: null,\n  totalImages: null\n}\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case 'ON_INPUT_ENTER_KEY_DOWN': {\n      return {\n        ...state,\n        searchValue: action.payload.searchValue,\n        routes: {\n          path: '/search'\n        }\n      }\n    }\n\n    case 'ON_HEADER_SEARCH_BOX_FOCUS': {\n      return {\n        ...state,\n        isNavigating: false,\n      }\n    }\n\n    case 'ON_HEADER_SEARCH_BOX_BLUR': {\n      return {\n        ...state,\n        isNavigating: true,\n      }\n    }\n\n    case 'ON_TOGGLE_DOWNLOADS': {\n      return {\n        ...state,\n        displayDownloads: !state.displayDownloads,\n      }\n    }\n\n    case 'ON_CLEAR_ALL_DOWNLOADS': {\n      return {\n        ...state,\n        imagesQueue: [],\n      }\n    }\n\n    case 'ON_ADD_IMAGE_TO_QUEUE': {\n      return {\n        ...state,\n        imagesQueue: [\n          ...state.imagesQueue,\n          state.currentImage\n        ]\n      }\n    }\n\n    case 'ON_REMOVE_IMAGE_FROM_QUEUE': {\n      return {\n        ...state,\n        imagesQueue: state.imagesQueue\n        .filter((image, i) => i !== Number(action.payload.id))\n      }\n    }\n\n    case 'ON_END_OF_LIST': {\n      return {\n        ...state,\n        currentImageId: 0\n      }\n    }\n\n    case 'ON_FETCH_IMAGES': {\n      return {\n        ...state,\n        currentPage: action.payload.currentPage\n      }\n    }\n\n    case 'ON_FETCH_IMAGES_SUCCESS': {\n      const isNewRequest = state.currentPage === 1\n\n      const currentImageId = isNewRequest\n        ? 0\n        : state.currentImageId\n\n      const imagesList = isNewRequest\n        ? action.payload.images.results\n        : [\n          ...state.imagesList,\n          ...action.payload.images.results\n        ]\n\n      // pre-cache images\n      const imagesFromList = imagesList.map(item => item.urls.thumb)\n      const preCacheImages = preCachedImages(imagesFromList)\n\n      return {\n        ...state,\n        imagesList,\n        currentImageId,\n        currentImage: {\n          ...imagesList[currentImageId],\n          src: preCacheImages[currentImageId]\n        },\n        preCacheImages,\n        isNavigating: true,\n        totalPages: action.payload.images.total_pages,\n        totalImages: action.payload.images.total\n      }\n    }\n\n    case 'ON_LOAD_NEXT_IMAGE': {\n      return {\n        ...state,\n        currentImage: {\n          ...state.imagesList[state.currentImageId + 1],\n          src: state.preCacheImages[state.currentImageId + 1]\n        },\n        currentImageId: state.currentImageId + 1\n      }\n    }\n\n    default:\n      return state\n  }\n}\n\nexport const store = createStore(reducer)\n"]}